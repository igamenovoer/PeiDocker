<div class="tab-title">
    ‚öôÔ∏è Environment Configuration
</div>
<p class="tab-description">
    Configure environment variables and device access including GPU support for your container.
</p>

<div class="grid grid-2">
    <!-- Environment Variables -->
    <div>
        <div class="card">
            <div class="card-header">
                üåç Environment Variables
            </div>
            <div class="card-content">
                <div class="form-group">
                    <label class="form-label">
                        Environment Variables
                    </label>
                    <div class="form-help mb-4">
                        Set custom environment variables for your container
                    </div>
                    
                    <div id="env-variables">
                        <div class="list-item">
                            <div class="list-item-content">
                                <div class="grid grid-2 gap-2">
                                    <input type="text" class="form-input" placeholder="VARIABLE_NAME" value="NODE_ENV">
                                    <input type="text" class="form-input" placeholder="value" value="development">
                                </div>
                            </div>
                            <div class="list-item-actions">
                                <button class="btn btn-error btn-sm" onclick="removeEnvVariable(this)">
                                    üóëÔ∏è Remove
                                </button>
                            </div>
                        </div>
                        
                        <div class="list-item">
                            <div class="list-item-content">
                                <div class="grid grid-2 gap-2">
                                    <input type="text" class="form-input" placeholder="VARIABLE_NAME" value="DEBUG">
                                    <input type="text" class="form-input" placeholder="value" value="true">
                                </div>
                            </div>
                            <div class="list-item-actions">
                                <button class="btn btn-error btn-sm" onclick="removeEnvVariable(this)">
                                    üóëÔ∏è Remove
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn btn-secondary" onclick="addEnvVariable()">
                        ‚ûï Add Environment Variable
                    </button>
                </div>
                
                <div class="alert alert-info mt-4">
                    <strong>Tip:</strong> Use ${VAR:-default} syntax for variable substitution with fallback values.
                </div>
            </div>
        </div>
    </div>

    <!-- Device Configuration -->
    <div>
        <div class="card mb-6">
            <div class="card-header">
                üñ•Ô∏è Device Configuration
            </div>
            <div class="card-content">
                <div class="form-group">
                    <label class="form-label" for="device-type">
                        Device Type
                    </label>
                    <select id="device-type" class="form-select" onchange="updateDeviceConfig()">
                        <option value="cpu">CPU Only</option>
                        <option value="gpu">GPU Support</option>
                        <option value="custom">Custom Device</option>
                    </select>
                    <div class="form-help">
                        Select the type of hardware access needed
                    </div>
                </div>

                <div id="gpu-config" style="display: none;">
                    <div class="form-group">
                        <label class="form-label">
                            GPU Configuration
                        </label>
                        <div class="flex items-center gap-4 mb-4">
                            <label class="toggle-switch">
                                <input type="checkbox" class="toggle-input" id="gpu-all" checked>
                                <span class="toggle-slider"></span>
                            </label>
                            <div>
                                <div class="form-label">Use All GPUs</div>
                                <div class="form-help">
                                    Grant access to all available GPU devices
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="gpu-memory">
                                GPU Memory Limit (optional)
                            </label>
                            <input 
                                type="text" 
                                id="gpu-memory" 
                                class="form-input" 
                                placeholder="e.g., 4GB or leave empty for no limit"
                            >
                            <div class="form-help">
                                Limit GPU memory usage (Docker 19.03+ required)
                            </div>
                        </div>
                    </div>
                </div>

                <div id="custom-device-config" style="display: none;">
                    <div class="form-group">
                        <label class="form-label" for="custom-device">
                            Custom Device Path
                        </label>
                        <input 
                            type="text" 
                            id="custom-device" 
                            class="form-input" 
                            placeholder="/dev/device_name"
                        >
                        <div class="form-help">
                            Specify custom device path to mount
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                üîß Runtime Configuration
            </div>
            <div class="card-content">
                <div class="form-group">
                    <div class="flex items-center gap-4">
                        <label class="toggle-switch">
                            <input type="checkbox" class="toggle-input" id="privileged-mode">
                            <span class="toggle-slider"></span>
                        </label>
                        <div>
                            <div class="form-label">Privileged Mode</div>
                            <div class="form-help">
                                Grant extended privileges to the container
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="alert alert-warning">
                    <strong>Warning:</strong> Privileged mode gives the container nearly all capabilities of the host machine. Use with caution.
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    let envVariableCount = 2; // Already have 2 demo variables

    function addEnvVariable() {
        const container = document.getElementById('env-variables');
        const div = document.createElement('div');
        div.className = 'list-item';
        div.innerHTML = `
            <div class="list-item-content">
                <div class="grid grid-2 gap-2">
                    <input type="text" class="form-input" placeholder="VARIABLE_NAME">
                    <input type="text" class="form-input" placeholder="value">
                </div>
            </div>
            <div class="list-item-actions">
                <button class="btn btn-error btn-sm" onclick="removeEnvVariable(this)">
                    üóëÔ∏è Remove
                </button>
            </div>
        `;
        container.appendChild(div);
        envVariableCount++;
    }

    function removeEnvVariable(button) {
        button.closest('.list-item').remove();
        envVariableCount--;
    }

    function updateDeviceConfig() {
        const deviceType = document.getElementById('device-type').value;
        const gpuConfig = document.getElementById('gpu-config');
        const customConfig = document.getElementById('custom-device-config');
        
        gpuConfig.style.display = deviceType === 'gpu' ? 'block' : 'none';
        customConfig.style.display = deviceType === 'custom' ? 'block' : 'none';
    }
</script>